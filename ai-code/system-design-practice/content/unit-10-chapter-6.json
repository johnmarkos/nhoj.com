{
  "unit": 10,
  "unitTitle": "Classic Designs Decomposed",
  "chapter": 6,
  "chapterTitle": "Chat Presence, Sync & Reliability",
  "chapterDescription": "Decompose presence state, multi-device sync, media handling, and resilience controls for chat platforms.",
  "problems": [
    {
      "id": "cd-cp-001",
      "type": "multiple-choice",
      "question": "Case Alpha: presence heartbeat service. Dominant risk is presence flapping due to heartbeat jitter. Which next move is strongest? The team needs a mitigation that can be canaried in under an hour.",
      "options": [
        "Model presence as soft-state with expiration windows and anti-flap damping.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-002",
      "type": "multiple-choice",
      "question": "Case Beta: multi-device sync coordinator. Dominant risk is multi-device unread count divergence. Which next move is strongest? Recent traffic growth exposed this bottleneck repeatedly.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Use per-device sync cursors and deterministic merge rules for unread counters.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-003",
      "type": "multiple-choice",
      "question": "Case Gamma: read-receipt pipeline. Dominant risk is attachment processing backlog delaying message visibility. Which next move is strongest? Leadership asked for a fix that reduces recurrence, not just MTTR.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Decouple media processing from text delivery and show pending attachment state.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-004",
      "type": "multiple-choice",
      "question": "Case Delta: attachment upload workflow. Dominant risk is read-receipt reorder causing inconsistent user state. Which next move is strongest? A previous rollback fixed averages but not tail impact.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Apply monotonic sequence checks for receipts and read-state transitions."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-005",
      "type": "multiple-choice",
      "question": "Case Epsilon: media thumbnail service. Dominant risk is encryption key refresh race across devices. Which next move is strongest? User trust risk is highest on this path.",
      "options": [
        "Protect key-distribution flow with versioned key epochs and replay guards.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-006",
      "type": "multiple-choice",
      "question": "Case Zeta: unread counter aggregator. Dominant risk is failover replay duplicating old presence events. Which next move is strongest? A shared dependency has uncertain health right now.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Run failover recovery with dedupe tokens for presence and receipt events.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-007",
      "type": "multiple-choice",
      "question": "Case Eta: device state reconciliation worker. Dominant risk is state sync storms after mobile reconnect wave. Which next move is strongest? The change must preserve cost discipline during peak.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Throttle reconnect sync requests with adaptive backoff and server hints.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-008",
      "type": "multiple-choice",
      "question": "Case Theta: encryption key distribution path. Dominant risk is push fallback sending alerts for already-read messages. Which next move is strongest? Telemetry shows risk concentrated in one partition class.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Gate push fallbacks on fresh read-state checks to avoid stale alerts."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-009",
      "type": "multiple-choice",
      "question": "Case Iota: push-notification fallback path. Dominant risk is attachment CDN outage blocking chat critical path. Which next move is strongest? The product team accepts graceful degradation, not silent corruption.",
      "options": [
        "Add degraded mode where attachment services fail without blocking core chat.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-010",
      "type": "multiple-choice",
      "question": "Case Kappa: chat failover recovery controller. Dominant risk is counter hot spots for high-traffic group chats. Which next move is strongest? Current runbooks are missing explicit ownership for this boundary.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Shard counter updates and batch aggregation for large-room scalability.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-011",
      "type": "multiple-choice",
      "question": "Case Lambda: presence heartbeat service. Dominant risk is presence flapping due to heartbeat jitter. Which next move is strongest? A cross-region path recently changed behavior after migration.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Model presence as soft-state with expiration windows and anti-flap damping.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-012",
      "type": "multiple-choice",
      "question": "Case Mu: multi-device sync coordinator. Dominant risk is multi-device unread count divergence. Which next move is strongest? Client retries are already elevated and can amplify mistakes.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Use per-device sync cursors and deterministic merge rules for unread counters."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-013",
      "type": "multiple-choice",
      "question": "Case Nu: read-receipt pipeline. Dominant risk is attachment processing backlog delaying message visibility. Which next move is strongest? Capacity headroom exists but only in specific pools.",
      "options": [
        "Decouple media processing from text delivery and show pending attachment state.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-014",
      "type": "multiple-choice",
      "question": "Case Xi: attachment upload workflow. Dominant risk is read-receipt reorder causing inconsistent user state. Which next move is strongest? A partial failure is masking itself as success in metrics.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Apply monotonic sequence checks for receipts and read-state transitions.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-015",
      "type": "multiple-choice",
      "question": "Case Omicron: media thumbnail service. Dominant risk is encryption key refresh race across devices. Which next move is strongest? This fix must hold under celebrity or campaign spike conditions.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Protect key-distribution flow with versioned key epochs and replay guards.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-016",
      "type": "multiple-choice",
      "question": "Case Pi: unread counter aggregator. Dominant risk is failover replay duplicating old presence events. Which next move is strongest? SLO burn suggests immediate containment plus follow-up hardening.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Run failover recovery with dedupe tokens for presence and receipt events."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-017",
      "type": "multiple-choice",
      "question": "Case Rho: device state reconciliation worker. Dominant risk is state sync storms after mobile reconnect wave. Which next move is strongest? On-call requested a reversible operational first step.",
      "options": [
        "Throttle reconnect sync requests with adaptive backoff and server hints.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-018",
      "type": "multiple-choice",
      "question": "Case Sigma: encryption key distribution path. Dominant risk is push fallback sending alerts for already-read messages. Which next move is strongest? The system mixes strict and eventual paths with unclear contracts.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Gate push fallbacks on fresh read-state checks to avoid stale alerts.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-019",
      "type": "multiple-choice",
      "question": "Case Tau: push-notification fallback path. Dominant risk is attachment CDN outage blocking chat critical path. Which next move is strongest? A hot-key pattern is likely from real traffic skew.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Add degraded mode where attachment services fail without blocking core chat.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-020",
      "type": "multiple-choice",
      "question": "Case Upsilon: chat failover recovery controller. Dominant risk is counter hot spots for high-traffic group chats. Which next move is strongest? The path must remain mobile-latency friendly under stress.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Shard counter updates and batch aggregation for large-room scalability."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-021",
      "type": "multiple-choice",
      "question": "Case Phi: presence heartbeat service. Dominant risk is presence flapping due to heartbeat jitter. Which next move is strongest? Compliance requires explicit behavior for edge-case failures.",
      "options": [
        "Model presence as soft-state with expiration windows and anti-flap damping.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-022",
      "type": "multiple-choice",
      "question": "Case Chi: multi-device sync coordinator. Dominant risk is multi-device unread count divergence. Which next move is strongest? This boundary has failed during the last two game days.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Use per-device sync cursors and deterministic merge rules for unread counters.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-023",
      "type": "multiple-choice",
      "question": "Case Psi: read-receipt pipeline. Dominant risk is attachment processing backlog delaying message visibility. Which next move is strongest? A cache invalidation gap has customer-visible impact.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Decouple media processing from text delivery and show pending attachment state.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-024",
      "type": "multiple-choice",
      "question": "Case Omega: attachment upload workflow. Dominant risk is read-receipt reorder causing inconsistent user state. Which next move is strongest? Dependency retries currently exceed safe server limits.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Apply monotonic sequence checks for receipts and read-state transitions."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-025",
      "type": "multiple-choice",
      "question": "Case Atlas: media thumbnail service. Dominant risk is encryption key refresh race across devices. Which next move is strongest? The fix should avoid broad architectural rewrites this quarter.",
      "options": [
        "Protect key-distribution flow with versioned key epochs and replay guards.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-026",
      "type": "multiple-choice",
      "question": "Case Nova: unread counter aggregator. Dominant risk is failover replay duplicating old presence events. Which next move is strongest? Current metrics hide per-tenant variance that matters.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Run failover recovery with dedupe tokens for presence and receipt events.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-027",
      "type": "multiple-choice",
      "question": "Case Orion: device state reconciliation worker. Dominant risk is state sync storms after mobile reconnect wave. Which next move is strongest? The fallback path is under-tested in production-like load.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Throttle reconnect sync requests with adaptive backoff and server hints.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-028",
      "type": "multiple-choice",
      "question": "Case Vega: encryption key distribution path. Dominant risk is push fallback sending alerts for already-read messages. Which next move is strongest? A control-plane issue is bleeding into data-plane reliability.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Gate push fallbacks on fresh read-state checks to avoid stale alerts."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-029",
      "type": "multiple-choice",
      "question": "Case Helios: push-notification fallback path. Dominant risk is attachment CDN outage blocking chat critical path. Which next move is strongest? The system must preserve critical events over bulk traffic.",
      "options": [
        "Add degraded mode where attachment services fail without blocking core chat.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-030",
      "type": "multiple-choice",
      "question": "Case Aurora: chat failover recovery controller. Dominant risk is counter hot spots for high-traffic group chats. Which next move is strongest? Recent deploys changed queue and timeout settings together.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Shard counter updates and batch aggregation for large-room scalability.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-031",
      "type": "multiple-choice",
      "question": "Case Nimbus: presence heartbeat service. Dominant risk is presence flapping due to heartbeat jitter. Which next move is strongest? The edge layer is healthy but origin saturation is growing.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Model presence as soft-state with expiration windows and anti-flap damping.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-032",
      "type": "multiple-choice",
      "question": "Case Pulse: multi-device sync coordinator. Dominant risk is multi-device unread count divergence. Which next move is strongest? Operational complexity is rising faster than team onboarding.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents.",
        "Use per-device sync cursors and deterministic merge rules for unread counters."
      ],
      "correct": 3,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-033",
      "type": "multiple-choice",
      "question": "Case Forge: read-receipt pipeline. Dominant risk is attachment processing backlog delaying message visibility. Which next move is strongest? Stakeholders need clear trade-off rationale in the postmortem.",
      "options": [
        "Decouple media processing from text delivery and show pending attachment state.",
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 0,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-034",
      "type": "multiple-choice",
      "question": "Case Harbor: attachment upload workflow. Dominant risk is read-receipt reorder causing inconsistent user state. Which next move is strongest? A localized failure is at risk of becoming cross-region.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Apply monotonic sequence checks for receipts and read-state transitions.",
        "Optimize only average latency and defer reliability controls until later.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 1,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-035",
      "type": "multiple-choice",
      "question": "Case Vector: media thumbnail service. Dominant risk is encryption key refresh race across devices. Which next move is strongest? Recovery sequencing matters as much as immediate containment.",
      "options": [
        "Apply a single global policy across all paths without boundary differentiation.",
        "Optimize only average latency and defer reliability controls until later.",
        "Protect key-distribution flow with versioned key epochs and replay guards.",
        "Rely on manual intervention as the primary mitigation for repeated incidents."
      ],
      "correct": 2,
      "explanation": "The strongest choice applies the right control at the right boundary to reduce recurrence and preserve system goals."
    },
    {
      "id": "cd-cp-036",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for presence heartbeat service: signal points to read-receipt reorder causing inconsistent user state. Support tickets confirm this pattern is recurring. What is the primary diagnosis?",
          "options": [
            "The current decomposition around presence heartbeat service mismatches read-receipt reorder causing inconsistent user state, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Run failover recovery with dedupe tokens for presence and receipt events.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-037",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for multi-device sync coordinator: signal points to encryption key refresh race across devices. The incident timeline shows policy mismatch across services. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "The current decomposition around multi-device sync coordinator mismatches encryption key refresh race across devices, creating repeated failures.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 1,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Throttle reconnect sync requests with adaptive backoff and server hints.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 2,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-038",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for read-receipt pipeline: signal points to failover replay duplicating old presence events. Last failover drill reproduced the same weakness. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The current decomposition around read-receipt pipeline mismatches failover replay duplicating old presence events, creating repeated failures.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 2,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward.",
            "Gate push fallbacks on fresh read-state checks to avoid stale alerts."
          ],
          "correct": 3,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-039",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for attachment upload workflow: signal points to state sync storms after mobile reconnect wave. A recent schema change increased failure surface area. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible.",
            "The current decomposition around attachment upload workflow mismatches state sync storms after mobile reconnect wave, creating repeated failures."
          ],
          "correct": 3,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Add degraded mode where attachment services fail without blocking core chat.",
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 0,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-040",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for media thumbnail service: signal points to push fallback sending alerts for already-read messages. A dependency team changed defaults without shared review. What is the primary diagnosis?",
          "options": [
            "The current decomposition around media thumbnail service mismatches push fallback sending alerts for already-read messages, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Shard counter updates and batch aggregation for large-room scalability.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-041",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for unread counter aggregator: signal points to attachment CDN outage blocking chat critical path. Alert noise is obscuring root-cause signals. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "The current decomposition around unread counter aggregator mismatches attachment CDN outage blocking chat critical path, creating repeated failures.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 1,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Model presence as soft-state with expiration windows and anti-flap damping.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 2,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-042",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for device state reconciliation worker: signal points to counter hot spots for high-traffic group chats. Backlog growth started before CPU looked saturated. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The current decomposition around device state reconciliation worker mismatches counter hot spots for high-traffic group chats, creating repeated failures.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 2,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward.",
            "Use per-device sync cursors and deterministic merge rules for unread counters."
          ],
          "correct": 3,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-043",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for encryption key distribution path: signal points to presence flapping due to heartbeat jitter. Canary data points already indicate partial regression. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible.",
            "The current decomposition around encryption key distribution path mismatches presence flapping due to heartbeat jitter, creating repeated failures."
          ],
          "correct": 3,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Decouple media processing from text delivery and show pending attachment state.",
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 0,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-044",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for push-notification fallback path: signal points to multi-device unread count divergence. A single hot tenant now dominates this workload. What is the primary diagnosis?",
          "options": [
            "The current decomposition around push-notification fallback path mismatches multi-device unread count divergence, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Apply monotonic sequence checks for receipts and read-state transitions.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-045",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for chat failover recovery controller: signal points to attachment processing backlog delaying message visibility. The current fallback behavior is undocumented for clients. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "The current decomposition around chat failover recovery controller mismatches attachment processing backlog delaying message visibility, creating repeated failures.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 1,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Protect key-distribution flow with versioned key epochs and replay guards.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 2,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-046",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for presence heartbeat service: signal points to read-receipt reorder causing inconsistent user state. Traffic composition changed after a mobile release. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The current decomposition around presence heartbeat service mismatches read-receipt reorder causing inconsistent user state, creating repeated failures.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 2,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward.",
            "Run failover recovery with dedupe tokens for presence and receipt events."
          ],
          "correct": 3,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-047",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for multi-device sync coordinator: signal points to encryption key refresh race across devices. This path is business-critical during daily peaks. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible.",
            "The current decomposition around multi-device sync coordinator mismatches encryption key refresh race across devices, creating repeated failures."
          ],
          "correct": 3,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Throttle reconnect sync requests with adaptive backoff and server hints.",
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 0,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-048",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for read-receipt pipeline: signal points to failover replay duplicating old presence events. The same class of issue appeared in a prior quarter. What is the primary diagnosis?",
          "options": [
            "The current decomposition around read-receipt pipeline mismatches failover replay duplicating old presence events, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Gate push fallbacks on fresh read-state checks to avoid stale alerts.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-049",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for attachment upload workflow: signal points to state sync storms after mobile reconnect wave. Error budget policy now requires corrective action. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "The current decomposition around attachment upload workflow mismatches state sync storms after mobile reconnect wave, creating repeated failures.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 1,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Add degraded mode where attachment services fail without blocking core chat.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 2,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-050",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for media thumbnail service: signal points to push fallback sending alerts for already-read messages. The mitigation needs explicit rollback checkpoints. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The current decomposition around media thumbnail service mismatches push fallback sending alerts for already-read messages, creating repeated failures.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 2,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward.",
            "Shard counter updates and batch aggregation for large-room scalability."
          ],
          "correct": 3,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-051",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for unread counter aggregator: signal points to attachment CDN outage blocking chat critical path. Some retries are deterministic failures and should not repeat. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible.",
            "The current decomposition around unread counter aggregator mismatches attachment CDN outage blocking chat critical path, creating repeated failures."
          ],
          "correct": 3,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Model presence as soft-state with expiration windows and anti-flap damping.",
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 0,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-052",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for device state reconciliation worker: signal points to counter hot spots for high-traffic group chats. A read/write boundary is currently coupled too tightly. What is the primary diagnosis?",
          "options": [
            "The current decomposition around device state reconciliation worker mismatches counter hot spots for high-traffic group chats, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Use per-device sync cursors and deterministic merge rules for unread counters.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-053",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for encryption key distribution path: signal points to presence flapping due to heartbeat jitter. Global averages hide one region with severe tail latency. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "The current decomposition around encryption key distribution path mismatches presence flapping due to heartbeat jitter, creating repeated failures.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 1,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Decouple media processing from text delivery and show pending attachment state.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 2,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-054",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for push-notification fallback path: signal points to multi-device unread count divergence. Multiple teams are changing this path concurrently. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The current decomposition around push-notification fallback path mismatches multi-device unread count divergence, creating repeated failures.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 2,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward.",
            "Apply monotonic sequence checks for receipts and read-state transitions."
          ],
          "correct": 3,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-055",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for chat failover recovery controller: signal points to attachment processing backlog delaying message visibility. Only one zone currently has reliable spare capacity. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible.",
            "The current decomposition around chat failover recovery controller mismatches attachment processing backlog delaying message visibility, creating repeated failures."
          ],
          "correct": 3,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Protect key-distribution flow with versioned key epochs and replay guards.",
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 0,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-056",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for presence heartbeat service: signal points to read-receipt reorder causing inconsistent user state. Observability exists, but ownership on action is unclear. What is the primary diagnosis?",
          "options": [
            "The current decomposition around presence heartbeat service mismatches read-receipt reorder causing inconsistent user state, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Run failover recovery with dedupe tokens for presence and receipt events.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-057",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for multi-device sync coordinator: signal points to encryption key refresh race across devices. This risk compounds when demand spikes suddenly. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "The current decomposition around multi-device sync coordinator mismatches encryption key refresh race across devices, creating repeated failures.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 1,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Throttle reconnect sync requests with adaptive backoff and server hints.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 2,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-058",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for read-receipt pipeline: signal points to failover replay duplicating old presence events. The team prefers smallest high-leverage change first. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The current decomposition around read-receipt pipeline mismatches failover replay duplicating old presence events, creating repeated failures.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 2,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward.",
            "Gate push fallbacks on fresh read-state checks to avoid stale alerts."
          ],
          "correct": 3,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-059",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for attachment upload workflow: signal points to state sync storms after mobile reconnect wave. Known unknowns remain around stale cache windows. What is the primary diagnosis?",
          "options": [
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible.",
            "The current decomposition around attachment upload workflow mismatches state sync storms after mobile reconnect wave, creating repeated failures."
          ],
          "correct": 3,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Add degraded mode where attachment services fail without blocking core chat.",
            "Disable safeguards temporarily to increase short-term throughput.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 0,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-060",
      "type": "two-stage",
      "stages": [
        {
          "question": "Incident review for media thumbnail service: signal points to push fallback sending alerts for already-read messages. A rollback is possible but expensive if used too broadly. What is the primary diagnosis?",
          "options": [
            "The current decomposition around media thumbnail service mismatches push fallback sending alerts for already-read messages, creating repeated failures.",
            "This is normal variance and not a design/control issue.",
            "More retries alone will resolve this reliably without architectural changes.",
            "The root cause is unknown, so no targeted diagnosis is possible."
          ],
          "correct": 0,
          "explanation": "Diagnosis should identify the control/boundary mismatch driving repeated failure under realistic load."
        },
        {
          "question": "After diagnosis, what is the strongest next change?",
          "options": [
            "Disable safeguards temporarily to increase short-term throughput.",
            "Shard counter updates and batch aggregation for large-room scalability.",
            "Delay design changes and rely on current runbook only.",
            "Expand traffic first, then analyze incidents afterward."
          ],
          "correct": 1,
          "explanation": "Choose the smallest high-leverage change that directly closes the observed reliability and design gap."
        }
      ]
    },
    {
      "id": "cd-cp-061",
      "type": "multi-select",
      "question": "Which signals best identify decomposition boundary mistakes? (Select all that apply)",
      "options": [
        "Per-boundary latency/error telemetry",
        "Fault-domain segmented dashboards",
        "Dependency saturation by class",
        "Only global averages without segmentation"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-062",
      "type": "multi-select",
      "question": "Which controls improve safety on critical write paths? (Select all that apply)",
      "options": [
        "Explicit timeout budgets per hop",
        "Priority-aware admission controls",
        "Unbounded retries during overload",
        "Idempotency enforcement on retries"
      ],
      "correctIndices": [0, 1, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-063",
      "type": "multi-select",
      "question": "Which practices reduce hot-key or hot-partition impact? (Select all that apply)",
      "options": [
        "Queue isolation for heavy producers",
        "Single partition for all traffic classes",
        "Adaptive sharding for hot entities",
        "Assume healthy behavior globally without domain-specific evidence"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-064",
      "type": "multi-select",
      "question": "What improves reliability when mixing sync and async paths? (Select all that apply)",
      "options": [
        "Direct dual-write without reconciliation",
        "Transactional boundaries for critical writes",
        "Async outbox for side effects",
        "Replay-safe dedupe processing"
      ],
      "correctIndices": [1, 2, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-065",
      "type": "multi-select",
      "question": "Which choices usually lower operational risk at scale? (Select all that apply)",
      "options": [
        "Canary rollout with rollback gates",
        "Runbook ownership and abort criteria",
        "Capacity headroom by priority class",
        "Manual ad hoc response only"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-066",
      "type": "multi-select",
      "question": "What should be explicit in API/service contracts for this design? (Select all that apply)",
      "options": [
        "Per-endpoint consistency/freshness policy",
        "Explicit fallback behavior matrix",
        "Implicit behavior based on team memory",
        "Assume healthy behavior globally without domain-specific evidence"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-067",
      "type": "multi-select",
      "question": "Which anti-patterns often cause incident recurrence? (Select all that apply)",
      "options": [
        "Dependency saturation by class",
        "Only global averages without segmentation",
        "Per-boundary latency/error telemetry",
        "Fault-domain segmented dashboards"
      ],
      "correctIndices": [0, 2, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-068",
      "type": "multi-select",
      "question": "What increases confidence before broad traffic rollout? (Select all that apply)",
      "options": [
        "Unbounded retries during overload",
        "Idempotency enforcement on retries",
        "Explicit timeout budgets per hop",
        "Priority-aware admission controls"
      ],
      "correctIndices": [1, 2, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-069",
      "type": "multi-select",
      "question": "Which controls protect high-priority traffic during spikes? (Select all that apply)",
      "options": [
        "Adaptive sharding for hot entities",
        "Key-level replication for skewed load",
        "Queue isolation for heavy producers",
        "Assume healthy behavior globally without domain-specific evidence"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-070",
      "type": "multi-select",
      "question": "Which telemetry dimensions are most actionable for design triage? (Select all that apply)",
      "options": [
        "Async outbox for side effects",
        "Replay-safe dedupe processing",
        "Direct dual-write without reconciliation",
        "Transactional boundaries for critical writes"
      ],
      "correctIndices": [0, 1, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-071",
      "type": "multi-select",
      "question": "Which governance actions improve cross-team reliability ownership? (Select all that apply)",
      "options": [
        "Capacity headroom by priority class",
        "Manual ad hoc response only",
        "Canary rollout with rollback gates",
        "Runbook ownership and abort criteria"
      ],
      "correctIndices": [0, 2, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-072",
      "type": "multi-select",
      "question": "What helps prevent retry amplification cascades? (Select all that apply)",
      "options": [
        "Implicit behavior based on team memory",
        "Contracted degraded-mode semantics",
        "Per-endpoint consistency/freshness policy",
        "Assume healthy behavior globally without domain-specific evidence"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-073",
      "type": "multi-select",
      "question": "Which fallback strategies are strong when dependencies degrade? (Select all that apply)",
      "options": [
        "Per-boundary latency/error telemetry",
        "Fault-domain segmented dashboards",
        "Dependency saturation by class",
        "Only global averages without segmentation"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-074",
      "type": "multi-select",
      "question": "What reduces data-quality regressions in eventual pipelines? (Select all that apply)",
      "options": [
        "Explicit timeout budgets per hop",
        "Priority-aware admission controls",
        "Unbounded retries during overload",
        "Idempotency enforcement on retries"
      ],
      "correctIndices": [0, 1, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-075",
      "type": "multi-select",
      "question": "Which runbook components improve incident execution quality? (Select all that apply)",
      "options": [
        "Queue isolation for heavy producers",
        "Single partition for all traffic classes",
        "Adaptive sharding for hot entities",
        "Assume healthy behavior globally without domain-specific evidence"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-076",
      "type": "multi-select",
      "question": "Which architecture choices improve blast-radius containment? (Select all that apply)",
      "options": [
        "Direct dual-write without reconciliation",
        "Transactional boundaries for critical writes",
        "Async outbox for side effects",
        "Replay-safe dedupe processing"
      ],
      "correctIndices": [1, 2, 3],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-077",
      "type": "multi-select",
      "question": "What evidence demonstrates a fix worked beyond short-term recovery? (Select all that apply)",
      "options": [
        "Canary rollout with rollback gates",
        "Runbook ownership and abort criteria",
        "Capacity headroom by priority class",
        "Manual ad hoc response only"
      ],
      "correctIndices": [0, 1, 2],
      "explanation": "Correct choices are concrete controls that improve design clarity, reliability outcomes, and operational safety."
    },
    {
      "id": "cd-cp-078",
      "type": "numeric-input",
      "question": "A critical path handles 5,400,000 requests/day and 0.18% fail SLO. Failures/day?",
      "answer": 9720,
      "unit": "requests",
      "tolerance": 0.03,
      "explanation": "0.0018*5,400,000=9,720."
    },
    {
      "id": "cd-cp-079",
      "type": "numeric-input",
      "question": "Queue ingest is 2,200 events/min and drain is 2,530 events/min. Net drain rate?",
      "answer": 330,
      "unit": "events/min",
      "tolerance": 0,
      "explanation": "2,530-2,200=330."
    },
    {
      "id": "cd-cp-080",
      "type": "numeric-input",
      "question": "Retries add 0.28 extra attempts at 75,000 req/sec. Effective attempts/sec?",
      "answer": 96000,
      "unit": "attempts/sec",
      "tolerance": 0.02,
      "explanation": "75,000*1.28=96,000."
    },
    {
      "id": "cd-cp-081",
      "type": "numeric-input",
      "question": "Failover takes 16s and occurs 24 times/day. Total failover seconds/day?",
      "answer": 384,
      "unit": "seconds",
      "tolerance": 0,
      "explanation": "16*24=384."
    },
    {
      "id": "cd-cp-082",
      "type": "numeric-input",
      "question": "Target p99 is 650ms; observed p99 is 845ms. Percent over target?",
      "answer": 30,
      "unit": "%",
      "tolerance": 0.3,
      "explanation": "(845-650)/650=30%."
    },
    {
      "id": "cd-cp-083",
      "type": "numeric-input",
      "question": "If 34% of 130,000 req/min are high-priority, how many high-priority req/min?",
      "answer": 44200,
      "unit": "requests/min",
      "tolerance": 0.02,
      "explanation": "0.34*130,000=44,200."
    },
    {
      "id": "cd-cp-084",
      "type": "numeric-input",
      "question": "Error rate drops from 1.0% to 0.22%. Percent reduction?",
      "answer": 78,
      "unit": "%",
      "tolerance": 0.3,
      "explanation": "(1.0-0.22)/1.0=78%."
    },
    {
      "id": "cd-cp-085",
      "type": "numeric-input",
      "question": "A 9-node quorum cluster requires majority writes. Minimum acknowledgements?",
      "answer": 5,
      "unit": "acks",
      "tolerance": 0,
      "explanation": "Majority of 9 is 5."
    },
    {
      "id": "cd-cp-086",
      "type": "numeric-input",
      "question": "Backlog is 56,000 tasks with net drain 350 tasks/min. Minutes to clear?",
      "answer": 160,
      "unit": "minutes",
      "tolerance": 0,
      "explanation": "56,000/350=160."
    },
    {
      "id": "cd-cp-087",
      "type": "numeric-input",
      "question": "A fleet has 18 zones and 3 are unavailable. Percent remaining available?",
      "answer": 83.33,
      "unit": "%",
      "tolerance": 0.3,
      "explanation": "15/18=83.33%."
    },
    {
      "id": "cd-cp-088",
      "type": "numeric-input",
      "question": "MTTR improved from 52 min to 34 min. Percent reduction?",
      "answer": 34.62,
      "unit": "%",
      "tolerance": 0.3,
      "explanation": "(52-34)/52=34.62%."
    },
    {
      "id": "cd-cp-089",
      "type": "numeric-input",
      "question": "If 11% of 2,800,000 daily ops need manual checks, checks/day?",
      "answer": 308000,
      "unit": "operations",
      "tolerance": 0.02,
      "explanation": "0.11*2,800,000=308,000."
    },
    {
      "id": "cd-cp-090",
      "type": "ordering",
      "question": "Order a classic-design decomposition workflow.",
      "items": [
        "Identify critical user journey and invariants",
        "Split request path into atomic components",
        "Assign reliability/scale controls per boundary",
        "Validate with load/failure drills and refine"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Start with outcomes/invariants, then decompose, control, and validate."
    },
    {
      "id": "cd-cp-091",
      "type": "ordering",
      "question": "Order by increasing design risk.",
      "items": [
        "Explicit boundaries with contracts",
        "Shared dependency with safeguards",
        "Shared dependency without safeguards",
        "Implicit coupling with no ownership"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Risk rises as boundaries and ownership degrade."
    },
    {
      "id": "cd-cp-092",
      "type": "ordering",
      "question": "Order safe incident mitigation steps.",
      "items": [
        "Scope blast radius and affected flows",
        "Contain with guardrails and admission controls",
        "Apply targeted root-cause fix",
        "Run recurrence checks and hardening actions"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Scope, contain, fix, then harden."
    },
    {
      "id": "cd-cp-093",
      "type": "ordering",
      "question": "Order by increasing retry-control maturity.",
      "items": [
        "Fixed immediate retries",
        "Capped exponential retries",
        "Capped retries with jitter",
        "Jittered retries with retry budgets and telemetry"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Maturity improves with safeguards and observability."
    },
    {
      "id": "cd-cp-094",
      "type": "ordering",
      "question": "Order fallback sophistication.",
      "items": [
        "Implicit fallback behavior",
        "Manual fallback toggles",
        "Documented fallback matrix",
        "Policy-driven automated fallback with tests"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Sophistication rises with explicit policy and automation."
    },
    {
      "id": "cd-cp-095",
      "type": "ordering",
      "question": "Order failover validation rigor.",
      "items": [
        "Host health check only",
        "Health plus freshness checks",
        "Health/freshness plus staged traffic shift",
        "Staged shift plus failback rehearsal and rollback gates"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Rigor increases with validation and reversible control."
    },
    {
      "id": "cd-cp-096",
      "type": "ordering",
      "question": "Order by increasing blast radius.",
      "items": [
        "Single process failure",
        "Single node failure",
        "Single zone failure",
        "Cross-region control-plane failure"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Blast radius expands from local failures to regional control issues."
    },
    {
      "id": "cd-cp-097",
      "type": "ordering",
      "question": "Order data-path durability confidence.",
      "items": [
        "In-memory only acknowledgment",
        "Single durable write",
        "Replicated durable write",
        "Replicated durable write plus replay/integrity verification"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Durability confidence grows with replication and verification."
    },
    {
      "id": "cd-cp-098",
      "type": "ordering",
      "question": "Order by increasing operational discipline.",
      "items": [
        "Ad hoc incident response",
        "Named responder roles",
        "Role-based response with timeline",
        "Role-based response plus action closure tracking"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Discipline improves with structure and accountability."
    },
    {
      "id": "cd-cp-099",
      "type": "ordering",
      "question": "Order rollout safety for major design changes.",
      "items": [
        "Canary small cohort",
        "Monitor guardrail metrics",
        "Expand traffic gradually",
        "Finalize runbook and ownership updates"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Rollout should progress from limited exposure to institutionalization."
    },
    {
      "id": "cd-cp-100",
      "type": "ordering",
      "question": "Order evidence strength for fix success.",
      "items": [
        "Single successful test run",
        "Short canary stability",
        "Sustained SLO recovery in production",
        "Sustained recovery plus failure-drill pass"
      ],
      "correctOrder": [0, 1, 2, 3],
      "explanation": "Evidence strength rises with sustained production and drill results."
    }
  ]
}
